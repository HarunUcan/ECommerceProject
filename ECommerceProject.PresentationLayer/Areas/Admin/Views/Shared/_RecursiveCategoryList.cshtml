@model dynamic

@{
    var category = Model.Category as ECommerceProject.EntityLayer.Concrete.Category;
    int depth = Model.Depth;
    int subCategoryToggleCounter = category.CategoryId;

    // Katmana göre renk belirleme
    var backgroundColors = new[] { "bg-gray-300", "bg-amber-100", "bg-red-100", "bg-blue-100", "bg-green-100" };
    var backgroundColor = backgroundColors[depth % backgroundColors.Length]; // Derinliğe göre renk seç
}
<li>
    <div class="flex justify-between items-center @backgroundColor p-4 rounded-lg">
        <div class="flex justify-center items-center gap-2">
            @if(category.ImageUrl != null)
            {
                <img src="@category.ImageUrl?.Replace("wwwroot","")" alt="Kategori Resmi"
                     class="w-8 h-8 rounded-md object-cover" />
            }            
            <span class="font-medium text-gray-800">@category.Name</span>
        </div>
        
        <div class="space-x-3 flex items-center">
            @if (category.SubCategories?.Any() == true)
            {
                <button onclick="toggleSubcategories(@subCategoryToggleCounter)" class="text-blue-600" title="Alt Kategorileri Gör">
                    <i class="fas fa-eye"></i> <!-- Alt Kategorileri Gör -->
                </button>
            }
            
            <button onclick="toggleFeatured(@category.CategoryId, this)"
                    class="@(category.IsFeatured ? "text-amber-500" : "text-gray-600 hover:text-amber-500") transition"
                    title="@(category.IsFeatured ? "Öne Çıkarmayı Kaldır" : "Öne Çıkar")">
                <i class="fa-solid fa-star"></i>
            </button> <!-- Öne Çıkar/Kaldır -->

            @* BURANIN BACKEND KODLARI YAZILMMADI SADECE TASARIM VAR *@
            <button onclick="toggleTopFourCategory(@category.CategoryId, this)"
                    class="@(category.IsTopFourCategory ? "text-green-600" : "text-gray-600 hover:text-green-600") transition"
                    title="@(category.IsFeatured ? "4'lü Kategori Grubundan Kaldır" : "4'lü Kategori Grubuna Ekle")">
                <i class="fa-solid fa-dice-four"></i>
            </button> <!-- 4'lü Kategori Grubunu Öne Çıkar/Kaldır -->
            
            <a asp-area="Admin" asp-controller="Category" asp-action="Edit" asp-route-id="@category.CategoryId" class="text-yellow-600" title="Düzenle">
                <i class="fas fa-edit" title="Düzenle"></i> <!-- Düzenle -->
            </a>
            <button onclick="confirmDelete(@category.CategoryId)" class="text-red-600" title="Sil">
                <i class="fa-solid fa-trash-can mr-2"></i> <!-- Sil -->
            </button>
        </div>
    </div>

    @if (category.SubCategories?.Any() == true)
    {
        <ul id="subcategories-@subCategoryToggleCounter" class="ml-6 mt-2 hidden space-y-2">
            @foreach (var subCategory in category.SubCategories)
            {
                @await Html.PartialAsync("_RecursiveCategoryList", new { Category = subCategory, Depth = depth + 1 })
            }
        </ul>
    }
</li>



