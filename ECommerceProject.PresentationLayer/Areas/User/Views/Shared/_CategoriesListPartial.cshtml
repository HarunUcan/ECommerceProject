@model dynamic

@{
    Layout = null;
}

@{
    var category = Model.Category as ECommerceProject.EntityLayer.Concrete.Category;
    int depth = Model.Depth;
    var bottomMargin = depth == 0 ? "mb-2" : "";
    var textSize = depth == 0 ? "text-lg font-semibold" : depth == 1 ? "text-base font-medium" : "text-sm";
    var paddingClass = depth == 0 || depth == 1 ? "" : "pl-4"; // `depth == 1` ve üstü girintili olacak

    // string ConvertToSlug(string text)
    // {
    //     text = text.ToLower();

    //     text = text.Replace("ı", "i");
    //     text = text.Replace("İ", "I");
    //     text = text.Replace("ş", "s");
    //     text = text.Replace("Ş", "S");
    //     text = text.Replace("ğ", "g");
    //     text = text.Replace("Ğ", "G");
    //     text = text.Replace("ü", "u");
    //     text = text.Replace("Ü", "U");
    //     text = text.Replace("ö", "o");
    //     text = text.Replace("Ö", "O");
    //     text = text.Replace("ç", "c");
    //     text = text.Replace("Ç", "C");

    //     text = text.Replace(" ", "-");

    //     text = text.Replace(".", "");
    //     text = text.Replace("/", "");
    //     text = text.Replace("?", "");
    //     text = text.Replace("!", "");
    //     text = text.Replace(":", "");
    //     text = text.Replace(";", "");
    //     text = text.Replace(",", "");

    //     return text;
    // }
}

<li class="relative @paddingClass">
    @if (category.ImageUrl != null)
    {
        <a asp-area="User" asp-controller="Home" asp-action="Category" asp-route-slug="@category.Slug"
           class="flex items-center space-x-2 @(depth > 0 ? "ml-8" : "ml-0") text-gray-700 hover:text-black @textSize @bottomMargin"
           onmouseover="openSubmenu(@category.CategoryId, @depth)"
           onmouseleave="closeSubmenu(@category.CategoryId, @depth)">
           <div class="flex justify-center items-center gap-2">
               
               <img src="@category.ImageUrl?.Replace("wwwroot", "")" alt="Kategori Resmi"
               class="w-6 h-6 rounded-md object-cover" />

               <span>@category.Name</span>
               

               @* <span>@category.Name</span> *@
                
           </div>
            
            @if (category.SubCategories?.Any() == true && depth > 0)
            {
                <svg class="w-4 h-4 transition-transform duration-300" id="arrow-@category.CategoryId" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            }
        </a>
    }
    else
    {
        <a asp-area="User" asp-controller="Home" asp-action="Category" asp-route-slug="@category.Slug"
           class="flex items-center space-x-2 text-gray-700 hover:text-black @textSize @bottomMargin"
           onmouseover="openSubmenu(@category.CategoryId, @depth)"
           onmouseleave="closeSubmenu(@category.CategoryId, @depth)">
            <div class="flex justify-center items-center gap-2">
                
                
                <span class="pl-8">@category.Name</span>
                

                @* <span>@category.Name</span> *@

            </div>

            @if (category.SubCategories?.Any() == true && depth > 0)
            {
                <svg class="w-4 h-4 transition-transform duration-300" id="arrow-@category.CategoryId" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
            }
        </a>
    }
    @if (category.SubCategories?.Any() == true)
    {
        <ul id="submenu-@category.CategoryId"
            class="text-sm text-gray-600 space-y-2 transition-all duration-300 @(depth == 0 ? "" : "hidden")"
            onmouseover="cancelClose(@category.CategoryId)"
            onmouseleave="closeSubmenu(@category.CategoryId, @depth)">
            @foreach (var subCategory in category.SubCategories)
            {
                @await Html.PartialAsync("_CategoriesListPartial", new { Category = subCategory, Depth = depth + 1 })
            }
        </ul>
    }
</li>
